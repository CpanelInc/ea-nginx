/var/log/nginx/*.log {
        missingok
        rotate 21
        compress
        delaycompress
        notifempty
        create 640 nobody adm
        nodateext
        sharedscripts
        postrotate
                if [ -f /var/run/nginx.pid ]; then
                        kill -USR1 `cat /var/run/nginx.pid`
                fi
        endscript
}

/var/log/nginx/domains/* {
        missingok
        rotate 21
        compress
        delaycompress
        notifempty
        create 640 nobody adm
        nodateext
        prerotate
                killall -SIGHUP --quiet splitlogs # flush logs to disk if needed
                exit 0
        endscript
        postrotate
                if [ -f /var/run/nginx.pid ]; then
                        kill -USR1 `cat /var/run/nginx.pid`
                fi
                /usr/local/cpanel/scripts/ea-nginx-logrotate $1.1
        endscript
}
